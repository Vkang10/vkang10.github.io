<!DOCTYPE HTML>
<!--
	Massively by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Projects - Yiling Kang</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<a href="index.html" class="logo">Welcome</a>
					</header>

				<!-- Nav -->
					<nav id="nav">
						<ul class="links">
							<li><a href="index.html">Home</a></li>
							<li class="active"><a href="generic.html">Projects</a></li>
							<li><a href="elements.html">About Me</a></li>
						</ul>
						<ul class="icons">
							<li><a href="https://www.linkedin.com/in/yiling-kang-09531422a/" class="icon brands fa-linkedin"><span class="label">Linkedin</span></a></li>
							<li><a href="https://github.com/Vkang10" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
							<section class="post">
								<header class="major">
									<h1>Customer Lifetime<br />
									Value Predicting</h1>
									<h3>(SQL,Python)</p>
								</header>
								<div class="image main"><img src="images/4.jpg" alt="" /></div>
								<iframe src="https://docs.google.com/presentation/d/e/2PACX-1vSqhYq2SiyyWIh4S3az8KblbSH3VEpPspKZZfMj2AKUF_1aIXqtUyNKuujtT-PCWLnvYbQa1CgUNPcm/embed?start=false&loop=false&delayms=3000" frameborder="0" width="900" height="560" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>
								<p></p>
								<h3>Introduction & Background</h3>
								<p>Predicted Customer lifetime value(pCLV) is an essential index for a company to forecast profitability, set customer acquisition budgets, and determine goals for growth and improvement. It represents the future revenue generated by newly acquired customers throughout their relationship with the business.<b>This project aims to select the best model for Google Merchandise Store to predict the pCLV of their newly acquired customers within 90 days after being acquired.</b> The model can enable a value-based bidding strategy for Google's clients who struggle with a low repurchase rate or want customers to take direct action on their site. Also, through this analysis, we identify important factors that are linked to higher future revenue, which could help google merchandise and other google clients target the right customers and develop a smart bidding strategy on paid search promotions.</p>
								<h3>Variable Selection</h3>
								<p>We stand in customers' viewpoint and try to determine what features might affect them to make their purchase on Google Merchandise Store, considering factors such as geography, time, action, psychology, customer browsing habits, customer action, etc. And we created these new variables based on speculation to confirm the effects in the model.</p>
								<li><b>Geographical variables:</b> We are interested in identifying whether the area where most customers are located relates to future revenue or repeat purchase tendency, so we also add some area-related variables. (e.g., New York/California/Bay Area)</li>
								<li><b>Time Variables:</b> Considering time may be one of the determinant elements for predicting future revenue or identifying customers characteristics, we create new time variables (e.g., week, Quarter(Q1-Q4), month, Weekday/Weekend, Daytime/Nighttime).</li>
								<li><b>Psychology:</b> As psychological factors or pricing strategy might somehow affect customers' purchase or even purchase more on the website, we also add some variables related to these aspects. (e.g. Max product price/social referral/Promotion)</li>
								<li><b>Customer Browsing Habits:</b> As we want to understand our customers' characteristics, we aimed to learn more about their website browsing habits. These variables could also help us understand how we can reach out to those customers. (e.g., channel grouping/operation system/browsers)</li>
								<li><b>Customer Action-related Variables:</b> To better learn customers' behaviors on the website, several related variables are made. (e.g. bounce rate/product categories/frequency/ add & remove to cart).</li>
								<p></p>
								<p>We used Google BigQuery to look into details for each feature and check the number of records in the raw data. Dummy-coded the variables by transforming the value into 0 and 1 and dealt with missing data by making the Nan value to 0. We also match strings with their categories and turn them into dummies for product categories. After selecting variables, we examine customers' behaviors based on their first purchase and a week after the first purchase. Accordingly, put the variables into five following groups: First purchase, First purchase sessions, First purchase hits, First week sessions, First-week hits, and Future purchases (Table1).</p>
								<p>Pandas profiling is employed to assist exploratory data analysis. After cleaning raw data and creating new variables, Pandas data frame 'df' has been created and imported to Google Collab. There are 53 variables in our final dataset. To build up models, we divided the final dataset into development and holdout datasets by April first in 2017.</p>
								<h3>Modeling</h3>
								<p><b>1. Initial model: </b>
									Based on the exploratory data analysis, we found a few extreme values for variables such as futureRevenue, revenue, visitNumber, and productQuantityPurchased. For better modeling, we try to drop the records containing these outliers first (Table 2). After cleaning the extreme data, we put all variables except 'fullVisitorId,' 'firstPurchaseSessionTime' in the XGBoost regression model to generate our predicted result. Unfortunately, the R-squared is extremely low(0.1), indicating that most predictions are close to 0. As a result (Figure 1), we decided to split this model into two parts and combined them to make the final prediction more precise. The first regression model is trained on only users whose future revenue is not equal to zero, and the second part will be a classification model trained on all users predicting the probability that they will make at least one future purchase.
								</p>
								<p><b>2. Regression model </b>
									We improve our regression model to predict future revenue more accurately by dropping more outliers and normalizing data according to the initial model result. First, we choose only users who purchase at least once in the 90-day, and we also changed the measure of the outlier to remove more extreme values without dropping too much data (Table 3). Moreover, we undergo data normalization for the numeric variables to get rid of various irregularities that can make it more challenging to interpret the data and get a properly constructed and well-functioning database. 
								</p>
								<p>Then, we calculate the correlations between different variables and the dependent variable future revenue, looking for the factors that may influence the future revenue. After various attempts, we decided to regard 0.16 as a relatively high correlation level and chose variables with higher than 0.16 correlation in our regression model to predict future revenue (Table 4). We tried to use various models for the regression model choice, such as LinearRegression, DecisionTree, XGBoost, RandomForest, and Gradient Boost. Based on the model prediction accuracy (RMSE & R-squared), we finally choose XGBoost as our regression model. To further improve our regression model, we also tried to change the hyperparameters like learning rate (Table 5) and finally got the better and reasonable Training and Testing R-squared (Training R-squared:0.58 Testing R-squared:0.36) (Figure 2).</p>
								<p><b>3. Final Predict model </b>
									We also applied different types of machine learning methods for the classification model. Finally, we chose the Gaussian Naive Bayes one with the relatively high ROC(0.587) (Figure 3) to use in the final prediction. However, using the classification model prediction multiplying with average future revenue or regression model prediction, we found that both result in substantial prediction errors and RMSE (Figure 4). Thus, we use the average repeat purchase rate as an alternative to present the probability that people will purchase in the future. And we use <b><u>[Regression Model Prediction] * [Average Repeat Purchase Rate]</u></b> as our final model to make future predictions.  By running the final model, the result shows that the regression only model trained on repeat purchasers performed much better than the naive prediction, with a significant decrease in  MAE from 31.59 to 18.76 (Figure 4). Meanwhile, the final model also has a lower RMSE(69.25) and absolute average error(3.7) compared to the naive estimate, which means less prediction bias (Figure 4). To conclude, using the regression only predict model, we successfully reduce the MAE by more than 40%, allowing the model to predict the 90-day revenue of each new acquisition more accurately. We also identified the determinant factors for future revenue, assisting Google Merchandise Store to boost revenue in the future. More insights are generated for companies leveraging Google ads to optimize the digital advertisements toward driving acquisitions with higher future revenue.
								</p>
								<h3>Conclusion & Insights</h3>
								<p>Acquiring customers with higher pCLV is a challenge for not only Google Merchandise Store but also clients that utilize Google Ads & Google Analytics for online promotion. We developed a few insights through the analysis process that will benefit those clients to boost revenue. In our final model, we identified that the below 14 variables have a mentionable impact on predicting future revenue; therefore, we came up with the following recommendations.</p>
								<code>'directChannelGrouping', 'productQuantityPurchased', 'officePurchased', 'chromeOS', 'hits', "Q4", "firstWeekRevenue", "timeOnSite", 'electronicsPurchased', 'Maxproductprice', "revenue", 'pageviews', 'lifestylePurchased', 'referralChannelGrouping'</code>
								<p></p>
								<li><b>Focus on providing special offers to specific product categories - office goods, lifestyle items, and electronic products: </b></li>
								<p>According to our analysis, specific categories such as Office goods, lifestyle items, and electronic products from Google Merchandise Store have more probability of generating higher future revenue, and investing more in these specific categories buyers can pay off in terms of increased revenue. Google can provide offer-bundles for office, lifestyle, and electronic products and feature deals of the month for high-selling items from these categories in Q4.</p>
								<li><b>Targeting the “Chrome” user base </b></li>
								<p></p>Visitors using Chromebook devices or having ChromOS as their default OS is highly related to generating higher future revenue. This is a self-explanatory fact as people owning Chromebooks or using the ChromOS operation system might be already loyal users of Google-branded products and more likely to purchase from Google merchandise stores. Even though this might be a niche segment for Google to focus on, prioritizing this specific user segment for targeted promotion and advertising can increase future revenue.</p>
								<li><b>Efficient allocation of ads budget by focusing  more on direct visitors</b></li>
								<p>One fascinating insight that we found is that visitors coming to the site by clicking through links (referralChannelGrouping) displayed on the other sites (not social media rather blog/article or content websites) do not contribute to future revenue. Even though these visitors clicked on the link that shows some sort of interest on their behalf, such visitors do not purchase or contribute to the revenue in the long run. So Google Merchandise can focus more on visitors who search directly for the store or have pre-determination on visiting the site (directChannelGrouping) rather than randomly clicking on links that show up on other websites to increase future revenue.</p>
								<li><b>Provide pop-up promotions/coupon when users have interacted with the website to a certain threshold level </b></li>
								<p>Our analysis indicates that higher user interaction with the website leads to increased future revenue. People who spend more time on in-general site exploration, clicking on products pictures/descriptions, and different category tabs are more probable to purchase. Providing pop-up coupons/promotional discounts/offers to encourage them to click on more pages and stay longer on the website. </p>
								<li><b>Increased allocation of Advertising budget on the 4th Quarter</b></li>
								<p>Our analysis indicates that customers who are acquired in the 4th quarter are more likely to generate higher revenue in the future than the other three quarters. The fourth quarter consists of holiday seasons, e.g., Christmas, Halloween, Thanksgiving, Black Friday, Cyber Monday, etc. So, for eCommerce sites, intensifying promotions at this specific time of the year would attract potential customers to the site.</p>
								<li><b>Targeting high spenders and buyers of expensive products</b></li>
								<p>Our analysis indicated that those who have bought relatively expensive products are more likely to contribute to the site's future revenue among all the purchasing customers. So, businesses can segment their customer base based on their share of wallets. Those spending a significant amount on expensive products are definitely more valuable to the company for maximizing future revenue. Promoting products that have a similar expensive price range to this customer base or offering them personalized deals for such products on-site can be a recommended way to retain this profitable segment.</p>
								<p>An automated Smart bidding strategy is most advisable for eCommerce sites like Google Merchandise store, where clients can set up contextual signals like device operating system, time of the day/week, etc. Such smart bidding considers whether a user has browsed a product during a previous site visit, is on a loyalty program list the client has uploaded or has a profile similar to existing customers.</p>
								<h3>Limitation</h3>
								<p>Although we developed a well-performed prediction model for this analysis project, there are limitations to this model. Given that not many people are motivated to buy branded merchandise repeatedly, Google Merchandise Store only obtained 7.2% of newly acquired customers who have repurchase behavior in the first week after their first purchase. It is hard for us to make an accurate prediction based on only 7% of the data. Since they did not revisit the website, about 93% of customer data cannot be put in our pCLV prediction model. This fact might influence the accuracy of our prediction.</p>
								<h3>APPENDICES</h3>
								<h4>Variables Meaning</h4>
								<iframe width="900" height="600" frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSYYt8zpjGVnk77uYNnDecTtR6q5ogG_e5kiUHN_ehXZ1BoWfgOlbazOvi00Y3t-w/pubhtml?widget=true&amp;headers=false"></iframe>
								<h4>Future Revenue Correlation </h4>
								<style type="text/css">
									.tg  {border-collapse:collapse;border-spacing:0;}
									.tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
									  overflow:hidden;padding:10px 5px;word-break:normal;}
									.tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
									  font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
									.tg .tg-8xzx{background-color:#ffffff;border-color:#000000;color:#202124;font-weight:bold;text-align:left;vertical-align:top}
									.tg .tg-hvl3{background-color:#FFF;border-color:#000000;color:#202124;font-weight:bold;text-align:left;vertical-align:top}
									.tg .tg-v9cm{background-color:#FFF;border-color:#000000;color:#202124;text-align:left;vertical-align:top}
									</style>
									<table class="tg" style="undefined;table-layout: fixed; width: 560px">
									<colgroup>
									<col style="width: 211px">
									<col style="width: 349px">
									</colgroup>
									<thead>
									  <tr>
										<th class="tg-8xzx"><span style="font-weight:700;font-style:normal;text-decoration:none;color:#202124;background-color:transparent">Varaiables </span></th>
										<th class="tg-8xzx"><span style="font-weight:700;font-style:normal;text-decoration:none;color:#202124;background-color:transparent">Correlation with future revenue</span></th>
									  </tr>
									</thead>
									<tbody>
									  <tr>
										<td class="tg-hvl3"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">revenue                         </span></td>
										<td class="tg-v9cm"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">0.362663</span></td>
									  </tr>
									  <tr>
										<td class="tg-hvl3"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">hits                           </span></td>
										<td class="tg-v9cm"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">0.187032</span></td>
									  </tr>
									  <tr>
										<td class="tg-hvl3"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">pageviews                      </span></td>
										<td class="tg-v9cm"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">0.200819</span></td>
									  </tr>
									  <tr>
										<td class="tg-hvl3"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">firstWeekRevenue                </span></td>
										<td class="tg-v9cm"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">0.194428</span></td>
									  </tr>
									  <tr>
										<td class="tg-hvl3"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">Maxproductprice                 </span></td>
										<td class="tg-v9cm"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">0.277352</span></td>
									  </tr>
									  <tr>
										<td class="tg-hvl3"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">directChannelGrouping           </span></td>
										<td class="tg-v9cm"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">0.274020</span></td>
									  </tr>
									  <tr>
										<td class="tg-hvl3"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">chromeOS                        </span></td>
										<td class="tg-v9cm"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">0.207824</span></td>
									  </tr>
									  <tr>
										<td class="tg-hvl3"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">officePurchased                 </span></td>
										<td class="tg-v9cm"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">0.235239</span></td>
									  </tr>
									  <tr>
										<td class="tg-hvl3"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">lifestylePurchased              </span></td>
										<td class="tg-hvl3"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">0.187917</span></td>
									  </tr>
									  <tr>
										<td class="tg-v9cm"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">electronicsPurchased            </span></td>
										<td class="tg-v9cm"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">0.260611</span></td>
									  </tr>
									  <tr>
										<td class="tg-v9cm"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">productQuantityPurchased        </span></td>
										<td class="tg-v9cm"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">0.541093</span></td>
									  </tr>
									  <tr>
										<td class="tg-v9cm"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">Q4                              </span></td>
										<td class="tg-v9cm"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">0.168452</span></td>
									  </tr>
									  <tr>
										<td class="tg-v9cm"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">timeOnSite                      </span></td>
										<td class="tg-v9cm"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">0.168338</span></td>
									  </tr>
									  <tr>
										<td class="tg-v9cm"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">referralChannelGrouping        </span></td>
										<td class="tg-v9cm"><span style="font-weight:400;font-style:normal;text-decoration:none;color:#202124;background-color:#FFF">-0.196190</span></td>
									  </tr>
									</tbody>
									</table>
									<h4>Purchase Revenue Model(XGBoost Regression)</h4>
									<span class="image fit"><img src="images/24.jpg" alt="" /></span>
									<h4>Purchase Incidence Model(Naive Bayes Classification)</h4>
									<span class="image fit"><img src="images/25.jpg" alt="" /></span>
									<h4>Final Prediction Model Evaluation</h4>
									<span class="image fit"><img src="images/26.jpg" alt="" /></span>

						<!-- Footer -->
						<footer>
							<div class="pagination">
								<!--<a href="#" class="previous">Prev</a>-->
								<a href="https://github.com/Vkang10/Customer-Lifetime-Value-Prediction" class="next">Code</a>
							</div>
						</footer>

					</div>

				<!-- Footer -->
				<footer id="footer">
					<section class="split contact">
						<section class="alt">
							<h3>Address</h3>
							<p>University of Maryland, College Park<br />
							MD,USA</p>
						</section>
						<section>
							<h3>Phone</h3>
							<p>(703) 409-6673</p>
						</section>
						<section>
							<h3>Email</h3>
							<p>vkang10@umd.edu</p>
						</section>
						<section>
							<h3>Social</h3>
							<ul class="icons alt">
								<li><a href="#" class="icon brands alt fa-facebook-f"><span class="label">Facebook</span></a></li>
								<li><a href="#" class="icon brands alt fa-instagram"><span class="label">Instagram</span></a></li>
								<li><a href="https://www.linkedin.com/in/yiling-kang-09531422a/" class="icon brands fa-linkedin"><span class="label">Linkedin</span></a></li>
								<li><a href="https://github.com/Vkang10" class="icon brands alt fa-github"><span class="label">GitHub</span></a></li>
							</ul>
						</section>
					</section>
				</footer>

				<!-- Copyright -->
					<div id="copyright">
						<ul><li>&copy; Untitled</li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li></ul>
					</div>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>